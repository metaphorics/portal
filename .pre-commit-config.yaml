minimum_pre_commit_version: "3.5.0"

repos:
  # General text cleanup for markdown files
  - repo: https://github.com/pre-commit/pre-commit-hooks
    rev: v6.0.0
    hooks:
      # Remove trailing whitespace
      - id: trailing-whitespace

      # Ensure files end with a newline
      - id: end-of-file-fixer

      # Fix mixed line endings (convert to LF)
      - id: mixed-line-ending
        args: ["--fix=lf"]

      # Fix UTF-8 byte order marker
      - id: fix-byte-order-marker

  - repo: https://github.com/golangci/golangci-lint
    rev: v2.7.2
    hooks:
      - id: golangci-lint
        name: golangci-lint
        description: Fast linters runner for Go. Note that only modified files are linted, so linters like 'unused' that need to scan all files won't work as expected. Only applies autofixes and always passes.
        entry: bash -c 'golangci-lint run --new-from-rev HEAD --fix || true'
        types: [go]
        language: golang
        require_serial: true
        pass_filenames: false
      - id: golangci-lint-full
        name: golangci-lint-full
        description: Fast linters runner for Go. Runs on all files in the module. Use this hook if you use pre-commit in CI. Only applies autofixes and always passes.
        entry: bash -c 'golangci-lint run --fix || true'
        types: [go]
        language: golang
        require_serial: true
        pass_filenames: false
      - id: golangci-lint-fmt
        name: golangci-lint-fmt
        description: Fast linters runner for Go. Formats all files in the repo.
        entry: golangci-lint fmt
        types: [go]
        language: golang
        require_serial: true
        pass_filenames: false
      - id: golangci-lint-config-verify
        name: golangci-lint-config-verify
        description: Verifies the configuration file
        entry: golangci-lint config verify
        files: '\.golangci\.(?:yml|yaml|toml|json)'
        language: golang
        pass_filenames: false
